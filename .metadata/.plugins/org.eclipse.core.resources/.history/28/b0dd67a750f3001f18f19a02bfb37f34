package Inventory;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.TimeoutException; // <-- Import this class
import org.openqa.selenium.NoSuchElementException;
import org.openqa.selenium.StaleElementReferenceException;
import org.openqa.selenium.ElementClickInterceptedException;
import org.openqa.selenium.interactions.Actions;

import java.time.Duration;

public class in_gate_pass_rawmaterial {
	
	
	

	    	public static void initiate1(WebDriver driver) {
	            try {
	                WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));

	                // Wait for the 'Gate Pass' button to be clickable and click it
	                WebElement gatePassButton = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//span[text()=' Gate Pass']")));
	                gatePassButton.click();
	                System.out.println("Gate Pass clicked.");

	                // Wait for the 'Gate Pass IN' link to be clickable and click it
	                WebElement gatePassInLink = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//a[text()=' Gate Pass IN ']")));
	                gatePassInLink.click();
	                System.out.println("Gate Pass IN clicked.");

	                // Wait for the 'Create' button to be clickable and click it
	                WebElement createButton = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//button[normalize-space()='Create']")));
	                createButton.click();
	                System.out.println("Create button clicked.");

	                // Select supplier name
	                Thread.sleep(1000);  // Add delay for dropdown to open
	                WebElement supplierNameDropdown = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//p-dropdown[@formcontrolname='supplierId']")));
	                supplierNameDropdown.click();
	                Actions actions = new Actions(driver);
	                actions.moveToElement(driver.findElement(By.xpath("//span[text()='Hyatt Regency']"))).click().build().perform();
	                System.out.println("Supplier selected: Hyatt Regency");

	                // Select department
	                WebElement departmentDropdown = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//p-dropdown[@formcontrolname='departmentId']")));
	                departmentDropdown.click();
	                actions.moveToElement(driver.findElement(By.xpath("//span[text()='Inventory']"))).click().build().perform();
	                System.out.println("Department selected: Inventory");

	                // Select material type
	                WebElement materialTypeDropdown = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//p-dropdown[@formcontrolname='materialType']")));
	                materialTypeDropdown.click();
	                actions.moveToElement(driver.findElement(By.xpath("//span[text()='Raw material']"))).click().build().perform();
	                System.out.println("Material type selected: Raw material");

	                // Fill in vehicle details
	                driver.findElement(By.xpath("//input[@formcontrolname='vehicleNo']")).sendKeys("TN45 4433");
	                driver.findElement(By.xpath("//input[@formcontrolname='driverName']")).sendKeys("rAMESH");
	                driver.findElement(By.xpath("//input[@formcontrolname='mobileNo']")).sendKeys("9094494949");
	                System.out.println("Vehicle details entered.");

	                // Click the next element
	                driver.findElement(By.cssSelector(".row.mt-2")).click();
	                
	              //  JavascriptExecutor js = (JavascriptExecutor) driver;
	              //  WebElement element = driver.findElement(By.xpath("//p-dropdown[@formcontrolname='freightIndicator']"));
	                //js.executeScript("arguments[0].scrollIntoView(true);", element); // Scrolls to the element
	             //   element.click();  // Then try clicking the element again
	              //  System.out.println("Element clicked after scrolling.");

	                
	                WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));

	                // Wait for the 'freightIndicator' element to be clickable
	                WebElement freightIndicator = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//p-dropdown[@formcontrolname='freightIndicator']")));

	                // Scroll to the 'freightIndicator' element before clicking it
	                JavascriptExecutor js = (JavascriptExecutor) driver;
	                js.executeScript("arguments[0].scrollIntoView(true);", freightIndicator);

	                // Click on the 'freightIndicator' element
	                freightIndicator.click();

	                // Wait for the 'To Pay' option to be visible, then click it
	                WebElement toPayOption = wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//span[text()='To Pay']")));

	                // Scroll to the 'To Pay' option before clicking it
	                js.executeScript("arguments[0].scrollIntoView(true);", toPayOption);

	                // Perform the hover and click action on the 'To Pay' option
	                Actions actions22 = new Actions(driver);
	                actions22.moveToElement(toPayOption).click().perform();

	                System.out.println("Supplier selected: Hyatt Regency");

	                
	                
	                
	               
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                WebDriverWait wait1 = new WebDriverWait(driver, Duration.ofSeconds(10));

	                // Wait until element is visible
	                WebElement element = wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("your_element_xpath")));

	                // Scroll to the element
	                JavascriptExecutor js = (JavascriptExecutor) driver;
	                js.executeScript("arguments[0].scrollIntoView(true);", element);

	                // Wait for it to be clickable and then click
	                element = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("your_element_xpath")));
	                element.click();     
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	              
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                //WebDriverWait wait1 = new WebDriverWait(driver, Duration.ofSeconds(10));

	                // Wait for the input element with the specific form control name to be clickable
	               // WebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//input[@formcontrolname='freightAmount']")));

	                // Click the element
	                //element.click();
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                
	                

	              
	                // Fill in freight amount and despatch reference
	                driver.findElement(By.xpath("//input[@formcontrolname='freightAmount']")).sendKeys("1000");
	                driver.findElement(By.xpath("//input[@formcontrolname='despatchRef']")).sendKeys("yes already paid");
	                System.out.println("Freight amount and despatch reference entered.");
	                driver.findElement(By.cssSelector(".row.mt-2")).click();


	                // Wait and click on 'Entry Point' dropdown
	                Thread.sleep(2000);
	                
	                
	                
	                
	                
	                

	             //   WebElement entryPointDropdown = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//p-dropdown[@formcontrolname='entryPoint']")));
	              //  entryPointDropdown.click();
	              //  actions.moveToElement(driver.findElement(By.xpath("//span[text()='First Point']"))).click().build().perform();
	              //  System.out.println("Entry point selected: First Point");
	                
	                
	                
	                
	                
	                

	                // Fill in entry time and remarks
	                driver.findElement(By.xpath("//input[@formcontrolname='entryTime']")).sendKeys("1233");
	                driver.findElement(By.xpath("//textarea[@formcontrolname='remarks']")).sendKeys("Raw material form submitted");
	                System.out.println("Entry time and remarks entered.");

	            } catch (ElementClickInterceptedException e) {
	                System.out.println("Element click intercepted: " + e.getMessage());
	                e.printStackTrace();
	            } catch (NoSuchElementException e) {
	                System.out.println("Element not found: " + e.getMessage());
	                e.printStackTrace();
	            } catch (StaleElementReferenceException e) {
	                System.out.println("Stale element reference: " + e.getMessage());
	                e.printStackTrace();
	            } catch (TimeoutException e) {
	                System.out.println("Timeout while waiting for element: " + e.getMessage());
	                e.printStackTrace();
	            } catch (InterruptedException e) {
	                System.out.println("Thread interrupted: " + e.getMessage());
	                e.printStackTrace();
	            } catch (Exception e) {
	                System.out.println("Unexpected error encountered: " + e.getMessage());
	                e.printStackTrace();
	            }
	        }
	    }